Parfait — j’applique ce qu’on a décidé :

sonar.exclusions : minimal, uniquement le build et le généré (on ne scanne pas, on ne teste pas).

sonar.coverage.exclusions : tout ce qu’on veut garder dans l’analyse mais retirer du calcul de couverture (wiring/config, callbacks décoratifs, DTO/Enums/Mappers/Repos, listeners purement log).


Tu peux copier-coller le bloc ci-dessous dans la section <properties> de ton pom.xml parent. Je ne touche à rien d’autre.

<!-- À insérer/mettre à jour dans <properties> de ton POM parent -->

<!-- 1) Ce qu'on NE SCANNE PAS du tout (build/généré/artefacts techniques) -->
<sonar.exclusions>
  **/target/**,
  **/build/**,
  **/out/**,
  **/generated-sources/**,
  **/generated-test-sources/**,
  **/com/bnp/schema/**/**,
  **/xsd/**/**,
  **/wsdl/**/**,
  **/openapi/**/**,
  **/swagger/**/**,
  **/proto/**/**,
  **/jooq/**/**
</sonar.exclusions>

<!-- 2) Ce qu'on GARDE dans l'analyse, mais qu'on RETIRE du calcul de couverture -->
<sonar.coverage.exclusions>
  <!-- Bootstraps / wiring sans logique -->
  **/*Application.java,
  **/*Configuration.java,
  **/*Config.java,

  <!-- Spring Batch: déclaration Job/Step et config (DSL) -->
  **/batch/**/job/**.java,
  **/batch/**/config/**.java,

  <!-- Callbacks décoratifs (en-tête/pied fixes) -->
  **/batch/**/writer/*HeaderCallback*.java,
  **/batch/**/writer/*FooterCallback*.java,

  <!-- Artéfacts structurels peu testables -->
  **/exposition/**/dto/**.java,
  **/domain/commons/**.java,        <!-- enums/constantes -->
  **/domain/**/model/**.java,       <!-- POJO/DTO domaine -->
  **/domain/mapper/**/**.java,      <!-- mappers purs -->
  **/domain/**/repository/**/**.java,  <!-- interfaces repo -->

  <!-- Listeners purement log/no-op (au cas par cas) -->
  **/*Logging*Listener.java,
  **/*NoOp*Listener.java
</sonar.coverage.exclusions>

Ce que ça donne dans sonar.exclusions

Uniquement ceci (rien d’autre) :

<sonar.exclusions>
  **/target/**,
  **/build/**,
  **/out/**,
  **/generated-sources/**,
  **/generated-test-sources/**,
  **/com/bnp/schema/**/**,
  **/xsd/**/**,
  **/wsdl/**/**,
  **/openapi/**/**,
  **/swagger/**/**,
  **/proto/**/**,
  **/jooq/**/**
</sonar.exclusions>

Ce que j’ai fait

Ajout des exclusions de couverture pour le wiring/config Spring & Spring Batch, callbacks décoratifs, DTO/Enums/Mappers/Repos et listeners de log.

Aucune autre modification du POM (pas d’ajout/suppression de dépendance ou plugin).

sonar.exclusions reste minimal (build/généré uniquement), conformément aux bonnes pratiques.


Ce que je n’ai pas fait

Je n’ai pas exclu de la couverture les readers/processors/writers/tasklets ni les listeners avec logique : ils doivent rester testés et comptés dans la couverture.

Je n’ai pas modifié de profils, de versions, ni la configuration Jacoco/Surefire.